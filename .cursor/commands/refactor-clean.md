# Refactor Clean（言語/フレームワーク不問）

安全にデッドコード（未使用のルート/ハンドラ/テンプレート/クラス等）を特定し、テストで担保しながら削除する。

## 前提

- 削除はリスクが高いので、**小さく・段階的に**行う
- 削除作業は原則テストとセット（プロジェクトのテストランナーで最小スコープ→必要なら全体）

## 手順（推奨）
1. 現状把握
   - `git status` / `git diff`（対象の変更範囲を明確化）
   - ルート/コマンドなど “外部から見える表面” を確認（Web/CLIアプリの場合）

2. 候補の抽出（例）
   - **未使用UIテンプレ/コンポーネント**: 参照されていないテンプレ/画面/コンポーネント
   - **未使用ルート/ハンドラ**: ルーティングや公開APIに紐づかないクラス/関数
   - **未使用バリデーション/DTO**: ハンドラから参照されない入力モデル
   - **未使用サービス/ヘルパ**: 参照されないクラス/関数

3. 参照確認（削除前に必須）
   - 文字列参照も疑う（ルート名/テンプレ名/DIキー/イベント名など）
   - 参照検索（例）: `ClassName|methodName|routeName|templateName|eventName`

4. 削除バッチを小さく実行
   - まずは **SAFE**（未使用privateメソッド、明確に参照ゼロの補助コード等）から
   - バッチごとにテスト（事前/変更後）

5. 破綻時の復旧
   - `git revert` / `git checkout -- <file>` 等で即時ロールバック
   - 参照の見落とし（文字列参照/動的解決）を追加で探索

## チェック観点
- ルート名・テンプレ名が文字列で参照されていないか（設定/テンプレも含めて確認）
- 認可（roles/ACL/policy/middleware等）の参照が消えていないか
- schema/migrations/DB制約に影響がないか（基本は削除しない）
- 削除後にテストが通るか（最低でも該当領域＋可能なら全体）

## 注意（依存関係の削除）

- 未使用依存の削除は影響範囲が大きいので **ユーザーが明示的に依頼した場合のみ**行う
