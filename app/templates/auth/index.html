{% extends "layout.html" %}
{% block content %}
<!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ -->
<section class="hero">
  <h1>ğŸŒ¿ ãƒãƒ«ã‚·ã‚§ã¨ã®é‹å‘½ã®å‡ºä¼šã„</h1>
  <p>åœ°åŸŸã®ãƒãƒ«ã‚·ã‚§ä¸»å‚¬è€…ã¨å‡ºåº—è€…ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«ãƒãƒƒãƒãƒ³ã‚°ã€‚<br />ã‚ãªãŸã®å•†å“ãŒæ´»èºã™ã‚‹èˆå°ã‚’è¦‹ã¤ã‘ã‚ˆã†ã€‚</p>
  {% if not user %}
  <div class="hero-cta">
    <a href="/register" class="btn-primary">æ–°è¦ç™»éŒ²</a>
    <a href="/login" class="btn-secondary">ãƒ­ã‚°ã‚¤ãƒ³</a>
  </div>
  {% else %}
  <div class="hero-cta">
    {% if user.role == "admin" %}
    <a href="/admin" class="btn-primary">ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
    {% elif user.role == "stallholder" %}
    <a href="/stallholder" class="btn-primary">å‡ºåº—è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
    {% elif user.role == "organizer" %}
    <a href="/organizer" class="btn-primary">ä¸»å‚¬è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
    {% endif %}
  </div>
  {% endif %}
</section>

<!-- å‹Ÿé›†ä¸­ã®ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ -->
<section>
  <h2>âœ¨ å‹Ÿé›†ä¸­ã®ãƒãƒ«ã‚·ã‚§</h2>
  
  {% if events %}
    <div class="bento-grid large">
      {% for event in events %}
        <div class="bento-item">
          <div class="event-card">
            <div class="event-card-image">
              {% if event.genre == "food" %}ğŸ”
              {% elif event.genre == "craft" %}ğŸ¨
              {% elif event.genre == "flower" %}ğŸŒ¸
              {% elif event.genre == "vintage" %}ğŸ•°ï¸
              {% else %}ğŸ“¦
              {% endif %}
            </div>
            <div class="event-card-content">
              <span class="event-badge">{{ event.region }}</span>
              <h3>{{ event.title }}</h3>
              <p style="color: #6b7280; font-size: 0.95rem; margin-bottom: 1rem;">
                {{ event.description[:100] }}{% if event.description|length > 100 %}...{% endif %}
              </p>
              
              <div class="event-meta">
                <div class="event-meta-item">
                  <span>ğŸ“</span>
                  <span>{{ event.venue_address }}</span>
                </div>
                <div class="event-meta-item">
                  <span>ğŸ“…</span>
                  <span>{{ event.start_date.strftime('%m/%d') }} - {{ event.end_date.strftime('%m/%d') }}</span>
                </div>
                <div class="event-meta-item">
                  <span>ğŸª</span>
                  <span>{{ event.capacity }}ç¤¾å‹Ÿé›†</span>
                </div>
              </div>

              <div class="event-card-footer">
                {% if user %}
                  {% if user.role == "stallholder" %}
                    <a href="/stallholder/events/{{ event.id }}" class="btn-primary">è©³ç´°ã‚’è¦‹ã‚‹</a>
                  {% elif user.role == "organizer" %}
                    <a href="/organizer/events/{{ event.id }}" class="btn-primary">è©³ç´°ã‚’è¦‹ã‚‹</a>
                  {% else %}
                    <a href="/stallholder/events/{{ event.id }}" class="btn-primary">è©³ç´°ã‚’è¦‹ã‚‹</a>
                  {% endif %}
                {% else %}
                  <a href="/login" class="btn-primary">è©³ç´°ã‚’è¦‹ã‚‹ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å¿…è¦ï¼‰</a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="card" style="text-align: center; padding: 3rem;">
      <p style="color: #9ca3af; font-size: 1.125rem;">
        ãŸã ã„ã¾å‹Ÿé›†ä¸­ã®ãƒãƒ«ã‚·ã‚§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br />è¿‘æ—¥å…¬é–‹äºˆå®šã§ã™ã€‚
      </p>
    </div>
  {% endif %}
</section>

<!-- ã‚³ãƒ³ã‚»ãƒ—ãƒˆèª¬æ˜ -->
<section style="margin-top: 4rem; margin-bottom: 4rem;">
  <div class="bento-grid">
    <div class="bento-item card">
      <h3 style="margin-bottom: 0.75rem;">ğŸŒ å‡ºåº—è€…å‘ã‘</h3>
      <p style="color: #6b7280;">
        ã‚ãªãŸã®å•†å“ãŒæ´»èºã§ãã‚‹ãƒãƒ«ã‚·ã‚§ã‚’ç°¡å˜ã«è¦‹ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚<br />åœ°åŸŸãƒ»ã‚¸ãƒ£ãƒ³ãƒ«ãƒ»æ—¥ç¨‹ã§æ¤œç´¢ã—ã€ç†æƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆã«å‡ºåº—ã—ã¾ã—ã‚‡ã†ã€‚
      </p>
    </div>
    <div class="bento-item card">
      <h3 style="margin-bottom: 0.75rem;">ğŸª ä¸»å‚¬è€…å‘ã‘</h3>
      <p style="color: #6b7280;">
        è³ªã®é«˜ã„å‡ºåº—è€…ã‚’åŠ¹ç‡çš„ã«è¦‹ã¤ã‘ã¦ã€<br />é­…åŠ›çš„ãªãƒãƒ«ã‚·ã‚§ã‚’ä½œã‚Šä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
      </p>
    </div>
    <div class="bento-item card">
      <h3 style="margin-bottom: 0.75rem;">ğŸ’¬ ã‚¹ãƒ ãƒ¼ã‚ºãªé€£æº</h3>
      <p style="color: #6b7280;">
        ãƒãƒƒãƒãƒ³ã‚°å¾Œã‚‚å°‚ç”¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ©Ÿèƒ½ã§ã€<br />è©³ç´°ãªã‚„ã‚Šå–ã‚Šã‚’ç°¡å˜ã«è¡Œãˆã¾ã™ã€‚
      </p>
    </div>
  </div>
</section>

<style>
  /* ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸å›ºæœ‰ã‚¹ã‚¿ã‚¤ãƒ« */
  .hero {
    animation: fadeInDown 0.8s ease-out;
  }

  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
{% endblock %}
