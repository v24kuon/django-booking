{% extends "layout.html" %}
{% block content %}
<div style="max-width: 520px; margin: 4rem auto;">
  <div class="card">
    <h2 style="text-align: center; margin-bottom: 1.5rem;">管理者アカウント作成</h2>

    {% if already_setup %}
      <div class="success" style="margin-bottom: 1.5rem;">
        既に管理者アカウントが作成されています。
      </div>
      <a href="/login" class="btn-primary" style="width: 100%; display: inline-block; text-align: center;">ログインへ</a>
    {% else %}
      {% if error %}
        <div class="error" style="margin-bottom: 1rem;">{{ error }}</div>
      {% endif %}

      <p style="color: #6b7280; margin-bottom: 1.5rem;">
        これは一度だけ使用する管理者作成ページです。作成後は
        <strong>ADMIN_SETUP_TOKEN</strong> を削除することを推奨します。
      </p>

      <form method="post" action="/setup/admin">
        <div class="form-group">
          <label for="setup_token">セットアップトークン</label>
          <input
            type="password"
            id="setup_token"
            name="setup_token"
            required
            placeholder="ADMIN_SETUP_TOKEN"
          />
        </div>

        <div class="form-group">
          <label for="email">管理者メールアドレス</label>
          <input
            type="email"
            id="email"
            name="email"
            value="{{ email or '' }}"
            required
            placeholder="admin@example.com"
          />
        </div>

        <div class="form-group">
          <label for="password">パスワード（8〜72文字）</label>
          <input
            type="password"
            id="password"
            name="password"
            required
            minlength="8"
            maxlength="72"
            placeholder="••••••••"
          />
        </div>

        <button type="submit" class="btn-primary" style="width: 100%;">作成する</button>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
